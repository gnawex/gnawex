<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.2">
    <meta name="project" content="GNAWEX v0.1.0">

    <title>Roles — GNAWEX v0.1.0</title>
    <link rel="stylesheet" href="dist/elixir-69d615db1d0fc8b2ce48.css" />

    <script src="dist/sidebar_items-d44b20baec.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-073abeeda7b7e6d5d7e9.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="http://gnawex.com">
        <img src="assets/logo.svg" alt="GNAWEX" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="http://gnawex.com" class="sidebar-projectName" translate="no">
GNAWEX
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.1.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">GUIDES</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/gnawex/gnawex/blob/main/guides/auth/roles.md#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span>Roles</span>
</h1>

<p>Roles are used to determine who can perform what operation in the database.
There are two kinds of roles, but they can be related in some way. The
difference is on where it exists.</p><h2 id="user-roles" class="section-heading">
  <a href="#user-roles" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">user-roles</p>
  </a>
  User roles
</h2>
<p>These ones are defined with <code class="inline">CREATE TYPE ROLE as ENUM (...)</code>. These are the
roles you'll see in GNAWEX. So far, none of these roles were worked on since
the DB is still actively worked on.</p><p>Although, here is what I have in mind:</p><ul><li><code class="inline">admin</code>: The system administrator<ul><li>Can appoint moderators</li><li>Maintain <code class="inline">items</code></li><li>Privileges like banning/unbanning users and mods</li></ul></li><li><code class="inline">mod</code>: Moderates the platform</li><li><code class="inline">user</code>: Traders, basically</li></ul><p>Anything the user can do, the mod and admin can as well. So all roles here are
able to create listings.</p><h2 id="database-roles" class="section-heading">
  <a href="#database-roles" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">database-roles</p>
  </a>
  Database roles
</h2>
<p>Database roles exist because I'm deferring authorization to Postgres. You can
get the list of roles in the DB by running this in <code class="inline">psql</code>: <code class="inline">\du</code>; and this
would show something like this:</p><pre><code class="makeup elixir" translate="no"><span class="n">gnawex_db</span><span class="p">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">du</span><span class="w">
                                        </span><span class="nc">List</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">roles</span><span class="w">
    </span><span class="nc">Role</span><span class="w"> </span><span class="n">name</span><span class="w">    </span><span class="o">|</span><span class="w">                         </span><span class="nc">Attributes</span><span class="w">                         </span><span class="o">|</span><span class="w">  </span><span class="nc">Member</span><span class="w"> </span><span class="n">of</span><span class="w">
</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="w">
 </span><span class="n">anon</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="nc">Cannot</span><span class="w"> </span><span class="n">login</span><span class="w">                                               </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="5778675056-1">{</span><span class="p" data-group-id="5778675056-1">}</span><span class="w">
 </span><span class="n">authenticator</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="nc">No</span><span class="w"> </span><span class="n">inheritance</span><span class="w">                                             </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="5778675056-2">{</span><span class="n">anon</span><span class="p" data-group-id="5778675056-2">}</span><span class="w">
 </span><span class="n">gnawex_merchant</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">Cannot</span><span class="w"> </span><span class="n">login</span><span class="p">,</span><span class="w"> </span><span class="nc">Bypass</span><span class="w"> </span><span class="nc">RLS</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="5778675056-3">{</span><span class="n">anon</span><span class="p" data-group-id="5778675056-3">}</span><span class="w">
 </span><span class="n">postgres</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nc">Superuser</span><span class="p">,</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">role</span><span class="p">,</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="nc">DB</span><span class="p">,</span><span class="w"> </span><span class="nc">Replication</span><span class="p">,</span><span class="w"> </span><span class="nc">Bypass</span><span class="w"> </span><span class="nc">RLS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="5778675056-4">{</span><span class="p" data-group-id="5778675056-4">}</span><span class="w">
 </span><span class="n">sekun</span><span class="w">           </span><span class="o">|</span><span class="w">                                                            </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="5778675056-5">{</span><span class="n">valid_user</span><span class="p" data-group-id="5778675056-5">}</span><span class="w">
 </span><span class="n">valid_user</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nc">Cannot</span><span class="w"> </span><span class="n">login</span><span class="w">                                               </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="5778675056-6">{</span><span class="p" data-group-id="5778675056-6">}</span></code></pre><p>Here's a summary of what each of them does:</p><ul><li><code class="inline">anon</code>: Public role. Can view listings, and items.</li><li><code class="inline">authenticator</code>: Role that is used to login. This role is still being worked
on to really flesh out what it's supposed to do.</li><li><code class="inline">gnawex_merchant</code>: This isn't meant for anyone, rather this role is used to
facilitate the exchanging of two listings. Since normal users cannot update
their own listings, much more other people's listings, a special role needs
to exist for that. You can think of it as GNAWEX updating the listings in
your behalf when your listing gets matched with another.</li><li><code class="inline">postgres</code>: The highest role achievable. Can do anything.</li><li><code class="inline">sekun</code>: An example of a <code class="inline">valid_user</code>. You can ignore this since I just use
this for testing.</li><li><code class="inline">valid_user</code>: This role is granted to users that are: 1) verified, and 2) not
banned.</li></ul>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="available-scripts.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Available scripts
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.2) for the
          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
